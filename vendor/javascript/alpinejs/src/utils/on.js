// alpinejs@3.13.5/src/utils/on.js downloaded from https://ga.jspm.io/npm:alpinejs@3.13.5/src/utils/on.js

import{d as e,t}from"../../_/a-e61HbN.js";function on(i,n,s,r){let l=i;let handler=e=>r(e);let c={};let wrapHandler=(e,t)=>i=>t(e,i);s.includes("dot")&&(n=dotSyntax(n));s.includes("camel")&&(n=camelCase(n));s.includes("passive")&&(c.passive=true);s.includes("capture")&&(c.capture=true);s.includes("window")&&(l=window);s.includes("document")&&(l=document);if(s.includes("debounce")){let t=s[s.indexOf("debounce")+1]||"invalid-wait";let i=isNumeric(t.split("ms")[0])?Number(t.split("ms")[0]):250;handler=e(handler,i)}if(s.includes("throttle")){let e=s[s.indexOf("throttle")+1]||"invalid-wait";let i=isNumeric(e.split("ms")[0])?Number(e.split("ms")[0]):250;handler=t(handler,i)}s.includes("prevent")&&(handler=wrapHandler(handler,((e,t)=>{t.preventDefault();e(t)})));s.includes("stop")&&(handler=wrapHandler(handler,((e,t)=>{t.stopPropagation();e(t)})));s.includes("self")&&(handler=wrapHandler(handler,((e,t)=>{t.target===i&&e(t)})));if(s.includes("away")||s.includes("outside")){l=document;handler=wrapHandler(handler,((e,t)=>{i.contains(t.target)||t.target.isConnected!==false&&(i.offsetWidth<1&&i.offsetHeight<1||i._x_isShown!==false&&e(t))}))}s.includes("once")&&(handler=wrapHandler(handler,((e,t)=>{e(t);l.removeEventListener(n,handler,c)})));handler=wrapHandler(handler,((e,t)=>{isKeyEvent(n)&&isListeningForASpecificKeyThatHasntBeenPressed(t,s)||e(t)}));l.addEventListener(n,handler,c);return()=>{l.removeEventListener(n,handler,c)}}function dotSyntax(e){return e.replace(/-/g,".")}function camelCase(e){return e.toLowerCase().replace(/-(\w)/g,((e,t)=>t.toUpperCase()))}function isNumeric(e){return!Array.isArray(e)&&!isNaN(e)}function kebabCase(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function isKeyEvent(e){return["keydown","keyup"].includes(e)}function isListeningForASpecificKeyThatHasntBeenPressed(e,t){let i=t.filter((e=>!["window","document","prevent","stop","once","capture"].includes(e)));if(i.includes("debounce")){let e=i.indexOf("debounce");i.splice(e,isNumeric((i[e+1]||"invalid-wait").split("ms")[0])?2:1)}if(i.includes("throttle")){let e=i.indexOf("throttle");i.splice(e,isNumeric((i[e+1]||"invalid-wait").split("ms")[0])?2:1)}if(i.length===0)return false;if(i.length===1&&keyToModifiers(e.key).includes(i[0]))return false;const n=["ctrl","shift","alt","meta","cmd","super"];const s=n.filter((e=>i.includes(e)));i=i.filter((e=>!s.includes(e)));if(s.length>0){const t=s.filter((t=>{t!=="cmd"&&t!=="super"||(t="meta");return e[`${t}Key`]}));if(t.length===s.length&&keyToModifiers(e.key).includes(i[0]))return false}return true}function keyToModifiers(e){if(!e)return[];e=kebabCase(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"=",minus:"-",underscore:"_"};t[e]=e;return Object.keys(t).map((i=>{if(t[i]===e)return i})).filter((e=>e))}export{on as default};

